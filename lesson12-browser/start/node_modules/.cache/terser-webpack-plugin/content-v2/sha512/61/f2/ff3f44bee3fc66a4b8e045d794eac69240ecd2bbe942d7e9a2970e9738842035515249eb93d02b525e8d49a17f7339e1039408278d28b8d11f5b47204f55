{"code":"!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){\"use strict\";o.r(t),function(){var e=new Error(\"Cannot find module './node_modules/axios'\");throw e.code=\"MODULE_NOT_FOUND\",e}();const n=document.querySelector(\".form-data\"),r=document.querySelector(\".region-name\"),a=document.querySelector(\".api-key\"),l=document.querySelector(\".errors\"),c=document.querySelector(\".loading\"),s=document.querySelector(\".result-container\"),u=document.querySelector(\".carbon-usage\"),i=document.querySelector(\".fossil-fuel\"),d=document.querySelector(\".my-region\"),y=document.querySelector(\".clear-btn\");calculateColor=async e=>{let t=[0,150,600,750,800],o=t.sort((t,o)=>Math.abs(t-e)-Math.abs(o-e))[0],n=[\"#2AA364\",\"#F5EB4D\",\"#9E4229\",\"#381D02\",\"#381D02\"][t.findIndex(e=>e>o)];chrome.runtime.sendMessage({action:\"updateIcon\",value:{color:n}})};const f=async(e,t)=>{try{await!function(){var e=new Error(\"Cannot find module './node_modules/axios'\");throw e.code=\"MODULE_NOT_FOUND\",e}().get(\"https://api.co2signal.com/v1/latest\",{params:{countryCode:t},headers:{\"auth-token\":e}}).then(e=>{let o=Math.floor(e.data.data.carbonIntensity);calculateColor(o),c.style.display=\"none\",n.style.display=\"none\",d.textContent=t,u.textContent=Math.round(e.data.data.carbonIntensity)+\" grams (grams C02 emitted per kilowatt hour)\",i.textContent=e.data.data.fossilFuelPercentage.toFixed(2)+\"% (percentage of fossil fuels used to generate electricity)\",s.style.display=\"block\"})}catch(e){console.log(e),c.style.display=\"none\",s.style.display=\"none\",l.textContent=\"Sorry, we have no data for the region you have requested.\"}},m=async e=>{e.preventDefault(),(async(e,t)=>{localStorage.setItem(\"apiKey\",e),localStorage.setItem(\"regionName\",t),c.style.display=\"block\",l.textContent=\"\",y.style.display=\"block\",f(e,t)})(a.value,r.value)},p=async()=>{const e=localStorage.getItem(\"apiKey\"),t=localStorage.getItem(\"regionName\");chrome.runtime.sendMessage({action:\"updateIcon\",value:{color:\"green\"}}),null===e||null===t?(n.style.display=\"block\",s.style.display=\"none\",c.style.display=\"none\",y.style.display=\"none\",l.textContent=\"\"):(s.style.display=\"none\",n.style.display=\"none\",f(e,t),y.style.display=\"block\")};n.addEventListener(\"submit\",e=>m(e)),y.addEventListener(\"click\",e=>(async e=>{e.preventDefault(),localStorage.removeItem(\"regionName\"),p()})(e)),p()}]);","extractedComments":[]}